---
id: cors
title: CORS
hide_title: true
---

<!-- COPY DOCS -->
<!-- ./thirdparty/cors.mdx -->

import GuidesLink from "/src/components/guidesLink"
import BackendSDKTabs from "/src/components/tabs/BackendSDKTabs";
import TabItem from '@theme/TabItem';
import NodeJSFrameworkSubTabsServerless from "/src/components/tabs/NodeJSFrameworkSubTabsServerless"
import PythonFrameworkSubTabs from "/src/components/tabs/PythonFrameworkSubTabs"
import GoFrameworkSubTabs from "/src/components/tabs/GoFrameworkSubTabs"
import AppInfoForm from "/src/components/appInfoForm"
import CoreInjector from "/src/components/coreInjector"
import {Question, Answer}from "/src/components/question"
import BackendSDKCasing from "/src/components/BackendSDKCasing"

# CORS

Cross-Origin Resource Sharing (CORS) is an HTTP-header based mechanism that allows a server to indicate any origins (domain, scheme, or port) other than its own from which a browser should permit loading resources.

An example of a cross-origin request: the front-end JavaScript code served from https://domain-a.com uses XMLHttpRequest to make a request for https://domain-b.com/data.json.

For security reasons, browsers restrict cross-origin HTTP requests initiated from scripts. For example, XMLHttpRequest and the Fetch API follow the same-origin policy. This means that a web application using those APIs can only request resources from the same origin the application was loaded from unless the response from other origins includes the right CORS headers.

## 4) Add the SuperTokens APIs & CORS setup

<AppInfoForm
    askForWebsiteDomain
    askForAPIBasePath
    hideWebsiteBasePathField
>

<BackendSDKTabs>
<TabItem value="nodejs">
<NodeJSFrameworkSubTabsServerless>
<TabItem value="express">

Add the `middleware` **BEFORE all your routes**.

```tsx
import express from "express";
import cors from "cors";
import supertokens from "supertokens-node";
import { middleware } from "supertokens-node/framework/express";

let app = express();

// ...other middlewares
app.use(cors({
    // highlight-start
    origin: "^{form_websiteDomain}",
    allowedHeaders: ["content-type", ...supertokens.getAllCORSHeaders()],
    credentials: true,
    // highlight-end
}));

// highlight-next-line
app.use(middleware());

// ...your API routes
```
This `middleware` adds a few APIs (see all the APIs [here](https://app.swaggerhub.com/apis/supertokens/FDI)):

- `POST ^{form_apiBasePath}/signinup`: For signing up/signing in a user using a thirdparty provider.

</TabItem>
</NodeJSFrameworkSubTabsServerless>
</TabItem>
<TabItem value="python">

<PythonFrameworkSubTabs>
<TabItem value="fastapi">

Use the `Middleware` (**BEFORE all your routes**) and the `get_all_cors_headers()` functions as shown below.

```python
from supertokens_python import get_all_cors_headers
from fastapi import FastAPI
from starlette.middleware.cors import CORSMiddleware
from supertokens_python.framework.fastapi import get_middleware

app = FastAPI()
# highlight-next-line
app.add_middleware(get_middleware())

# TODO: Add APIs

app = CORSMiddleware(
    app=app,
    allow_origins=[
        "^{form_websiteDomain}"
    ],
    allow_credentials=True,
    allow_methods=["GET", "PUT", "POST", "DELETE", "OPTIONS", "PATCH"],
	# highlight-next-line
    allow_headers=["Content-Type"] + get_all_cors_headers(),
)

# TODO: start server
```

</TabItem>
<TabItem value="flask">

- Use the `Middleware` (**BEFORE all your routes and after calling init function**) and the `get_all_cors_headers()` functions as shown below.
- Add a route to catch all paths and return a 404. This is needed because if we don't add this, then OPTIONS request for the APIs exposed by the `Middleware` will return a `404`.

```python
from supertokens_python import get_all_cors_headers
from flask import Flask, abort
from flask_cors import CORS # type: ignore
from supertokens_python.framework.flask import Middleware

app = Flask(__name__)
# highlight-next-line
Middleware(app)

# TODO: Add APIs

CORS(
    app=app,
    origins=[
        "^{form_websiteDomain}"
    ],
    supports_credentials=True,
	# highlight-next-line
    allow_headers=["Content-Type"] + get_all_cors_headers(),
)

# This is required since if this is not there, then OPTIONS requests for
# the APIs exposed by the supertokens' Middleware will return a 404
# highlight-start
@app.route('/', defaults={'u_path': ''})  # type: ignore
@app.route('/<path:u_path>')  # type: ignore
def catch_all(u_path: str):
    abort(404)
# highlight-end

# TODO: start server
```

</TabItem>
<TabItem value="django">

Use the `Middleware` and the `get_all_cors_headers()` functions as shown below in your `settings.py`.

```python
from supertokens_python import get_all_cors_headers
from typing import List
from corsheaders.defaults import default_headers

CORS_ORIGIN_WHITELIST = [
    "^{form_websiteDomain}"
]

CORS_ALLOW_CREDENTIALS = True

CORS_ALLOWED_ORIGINS = [
    "^{form_websiteDomain}"
]

CORS_ALLOW_HEADERS: List[str] = list(default_headers) + [
    "Content-Type"
    # highlight-next-line
] + get_all_cors_headers()

INSTALLED_APPS = [
    'corsheaders',
    'supertokens_python'
]

MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware',
    ...,
    # highlight-next-line
    'supertokens_python.framework.django.django_middleware.middleware',
]
```

</TabItem>
</PythonFrameworkSubTabs>

This `Middleware` adds a few APIs (see all the APIs [here](https://app.swaggerhub.com/apis/supertokens/FDI)):

- `POST ^{form_apiBasePath}/signinup`: For signing up/signing in a user using a thirdparty provider.

</TabItem>
</BackendSDKTabs>

</AppInfoForm>
